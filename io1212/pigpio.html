<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Using pigpio &mdash; Dictel io1212</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/color.css" type="text/css" />
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="canonical" href="https://www.dictel.io/io1212/pigpio.html" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Using pigpiod" href="pigpiod.html" />
    <link rel="prev" title="Using libgpiod" href="libgpiod.html" />
    <!--script async src="https://www.googletagmanager.com/gtag/js?id=G-EJG1VJMZER"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-EJG1VJMZER');
    </script-->
     

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html">
            <img src="_static/dictel_v1.0_exported_white.svg" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="index.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="intro.html">Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="intro.html#pinout">Pinout</a></li>
<li class="toctree-l1"><a class="reference internal" href="gpio_zero.html">Using GPIO Zero</a></li>
<li class="toctree-l1"><a class="reference internal" href="libgpiod.html">Using libgpiod</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Using pigpio</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#installation">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#example-1-blink">Example 1: Blink</a></li>
<li class="toctree-l2"><a class="reference internal" href="#example-2-using-inputs">Example 2: Using inputs</a></li>
<li class="toctree-l2"><a class="reference internal" href="#example-3-callback-functions">Example 3: Callback functions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="pigpiod.html">Using pigpiod</a></li>
<li class="toctree-l1"><a class="reference internal" href="pigpiod_remote.html">Using pigpiod remotely</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Dictel io1212</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <!-- Dictel -->
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="using-pigpio">
<span id="pigpio"></span><h1>Using pigpio<a class="headerlink" href="#using-pigpio" title="Permalink to this headline"></a></h1>
<p>The <a class="reference external" href="http://abyz.me.uk/rpi/pigpio/index.html">pigpio library</a>, which source code can be found in <a class="reference external" href="https://github.com/joan2937/pigpio">github</a>, is another C library specifically built to control the GPIO pins of the Raspberry Pi.</p>
<section id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline"></a></h2>
<p>As shown on pigpio’s <a class="reference external" href="http://abyz.me.uk/rpi/pigpio/download.html">installation instructions</a>, after making sure that <code class="docutils literal notranslate"><span class="pre">pigpiod</span></code> is not running, you can download it, compile it, and install it by running the following instructions. Please note that at the time of writing, the latest release is v79:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ubuntu@rpi:~$ wget https://github.com/joan2937/pigpio/archive/refs/tags/v79.zip
ubuntu@rpi:~$ unzip v79.zip
ubuntu@rpi:~$ <span class="nb">cd</span> pigpio-79
ubuntu@rpi:~/pigpio-79$ make
ubuntu@rpi:~/pigpio-79$ sudo make install
</pre></div>
</div>
<p>You can test the installation by running, in the <code class="docutils literal notranslate"><span class="pre">pigpio-79</span></code> directory, the following commands:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ubuntu@rpi:~/pigpio-79$ pigpiod -v
<span class="m">79</span>

ubuntu@rpi:~/pigpio-79$ sudo ./x_pigpio
Testing pigpio C I/F
<span class="o">[</span>...<span class="o">]</span>
TEST  <span class="m">1</span>.1  PASS <span class="o">(</span><span class="nb">set</span> mode, get mode: <span class="m">0</span><span class="o">)</span>
TEST  <span class="m">1</span>.2  PASS <span class="o">(</span><span class="nb">set</span> pull up down, read: <span class="m">1</span><span class="o">)</span>
<span class="o">[</span>...<span class="o">]</span>
TEST  <span class="m">9</span>.3  PASS <span class="o">(</span>run/stop script/script status: <span class="m">110</span><span class="o">)</span>
TEST  <span class="m">9</span>.4  PASS <span class="o">(</span>delete script: <span class="m">0</span><span class="o">)</span>
</pre></div>
</div>
</section>
<section id="example-1-blink">
<span id="pigpio-ex1"></span><h2>Example 1: Blink<a class="headerlink" href="#example-1-blink" title="Permalink to this headline"></a></h2>
<p>This first example sets up io1212’s inputs and outputs appropriately, and then turns the first output on and off repeatedly. If an LED is connected on the first output, you can expect to see it blink.</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;unistd.h&gt;</span><span class="cp"></span>
<span class="linenos"> 2</span>
<span class="linenos"> 3</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;pigpio.h&gt;</span><span class="cp"></span>
<span class="linenos"> 4</span>
<span class="linenos"> 5</span><span class="cp">#define Output_1 4</span>
<span class="linenos"> 6</span><span class="cp">#define Output_2 5</span>
<span class="linenos"> 7</span><span class="cp">#define Output_3 6</span>
<span class="linenos"> 8</span><span class="cp">#define Output_4 7</span>
<span class="linenos"> 9</span><span class="cp">#define Output_5 8</span>
<span class="linenos">10</span><span class="cp">#define Output_6 9</span>
<span class="linenos">11</span><span class="cp">#define Output_7 10</span>
<span class="linenos">12</span><span class="cp">#define Output_8 11</span>
<span class="linenos">13</span><span class="cp">#define Output_9 12</span>
<span class="linenos">14</span><span class="cp">#define Output_10 13</span>
<span class="linenos">15</span><span class="cp">#define Output_11 14</span>
<span class="linenos">16</span><span class="cp">#define Output_12 15</span>
<span class="linenos">17</span>
<span class="linenos">18</span><span class="cp">#define Input_1 16</span>
<span class="linenos">19</span><span class="cp">#define Input_2 17</span>
<span class="linenos">20</span><span class="cp">#define Input_3 18</span>
<span class="linenos">21</span><span class="cp">#define Input_4 19</span>
<span class="linenos">22</span><span class="cp">#define Input_5 20</span>
<span class="linenos">23</span><span class="cp">#define Input_6 21</span>
<span class="linenos">24</span><span class="cp">#define Input_7 22</span>
<span class="linenos">25</span><span class="cp">#define Input_8 23</span>
<span class="linenos">26</span><span class="cp">#define Input_9 24</span>
<span class="linenos">27</span><span class="cp">#define Input_10 25</span>
<span class="linenos">28</span><span class="cp">#define Input_11 26</span>
<span class="linenos">29</span><span class="cp">#define Input_12 27</span>
<span class="linenos">30</span>
<span class="linenos">31</span>
<span class="linenos">32</span><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">argv</span><span class="p">[])</span><span class="w"></span>
<span class="linenos">33</span><span class="p">{</span><span class="w"></span>
<span class="linenos">34</span><span class="w">   </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">gpioInitialise</span><span class="p">()</span><span class="o">&lt;</span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"></span>
<span class="linenos">35</span>
<span class="linenos">36</span><span class="w">   </span><span class="n">gpioSetMode</span><span class="p">(</span><span class="n">Output_1</span><span class="p">,</span><span class="w"> </span><span class="n">PI_OUTPUT</span><span class="p">);</span><span class="w"></span>
<span class="linenos">37</span><span class="w">   </span><span class="n">gpioSetMode</span><span class="p">(</span><span class="n">Output_2</span><span class="p">,</span><span class="w"> </span><span class="n">PI_OUTPUT</span><span class="p">);</span><span class="w"></span>
<span class="linenos">38</span><span class="w">   </span><span class="n">gpioSetMode</span><span class="p">(</span><span class="n">Output_3</span><span class="p">,</span><span class="w"> </span><span class="n">PI_OUTPUT</span><span class="p">);</span><span class="w"></span>
<span class="linenos">39</span><span class="w">   </span><span class="n">gpioSetMode</span><span class="p">(</span><span class="n">Output_4</span><span class="p">,</span><span class="w"> </span><span class="n">PI_OUTPUT</span><span class="p">);</span><span class="w"></span>
<span class="linenos">40</span><span class="w">   </span><span class="n">gpioSetMode</span><span class="p">(</span><span class="n">Output_5</span><span class="p">,</span><span class="w"> </span><span class="n">PI_OUTPUT</span><span class="p">);</span><span class="w"></span>
<span class="linenos">41</span><span class="w">   </span><span class="n">gpioSetMode</span><span class="p">(</span><span class="n">Output_6</span><span class="p">,</span><span class="w"> </span><span class="n">PI_OUTPUT</span><span class="p">);</span><span class="w"></span>
<span class="linenos">42</span><span class="w">   </span><span class="n">gpioSetMode</span><span class="p">(</span><span class="n">Output_7</span><span class="p">,</span><span class="w"> </span><span class="n">PI_OUTPUT</span><span class="p">);</span><span class="w"></span>
<span class="linenos">43</span><span class="w">   </span><span class="n">gpioSetMode</span><span class="p">(</span><span class="n">Output_8</span><span class="p">,</span><span class="w"> </span><span class="n">PI_OUTPUT</span><span class="p">);</span><span class="w"></span>
<span class="linenos">44</span><span class="w">   </span><span class="n">gpioSetMode</span><span class="p">(</span><span class="n">Output_9</span><span class="p">,</span><span class="w"> </span><span class="n">PI_OUTPUT</span><span class="p">);</span><span class="w"></span>
<span class="linenos">45</span><span class="w">   </span><span class="n">gpioSetMode</span><span class="p">(</span><span class="n">Output_10</span><span class="p">,</span><span class="w"> </span><span class="n">PI_OUTPUT</span><span class="p">);</span><span class="w"></span>
<span class="linenos">46</span><span class="w">   </span><span class="n">gpioSetMode</span><span class="p">(</span><span class="n">Output_11</span><span class="p">,</span><span class="w"> </span><span class="n">PI_OUTPUT</span><span class="p">);</span><span class="w"></span>
<span class="linenos">47</span><span class="w">   </span><span class="n">gpioSetMode</span><span class="p">(</span><span class="n">Output_12</span><span class="p">,</span><span class="w"> </span><span class="n">PI_OUTPUT</span><span class="p">);</span><span class="w"></span>
<span class="linenos">48</span>
<span class="linenos">49</span><span class="w">   </span><span class="n">gpioSetMode</span><span class="p">(</span><span class="n">Input_1</span><span class="p">,</span><span class="w"> </span><span class="n">PI_INPUT</span><span class="p">);</span><span class="w"></span>
<span class="linenos">50</span><span class="w">   </span><span class="n">gpioSetMode</span><span class="p">(</span><span class="n">Input_2</span><span class="p">,</span><span class="w"> </span><span class="n">PI_INPUT</span><span class="p">);</span><span class="w"></span>
<span class="linenos">51</span><span class="w">   </span><span class="n">gpioSetMode</span><span class="p">(</span><span class="n">Input_3</span><span class="p">,</span><span class="w"> </span><span class="n">PI_INPUT</span><span class="p">);</span><span class="w"></span>
<span class="linenos">52</span><span class="w">   </span><span class="n">gpioSetMode</span><span class="p">(</span><span class="n">Input_4</span><span class="p">,</span><span class="w"> </span><span class="n">PI_INPUT</span><span class="p">);</span><span class="w"></span>
<span class="linenos">53</span><span class="w">   </span><span class="n">gpioSetMode</span><span class="p">(</span><span class="n">Input_5</span><span class="p">,</span><span class="w"> </span><span class="n">PI_INPUT</span><span class="p">);</span><span class="w"></span>
<span class="linenos">54</span><span class="w">   </span><span class="n">gpioSetMode</span><span class="p">(</span><span class="n">Input_6</span><span class="p">,</span><span class="w"> </span><span class="n">PI_INPUT</span><span class="p">);</span><span class="w"></span>
<span class="linenos">55</span><span class="w">   </span><span class="n">gpioSetMode</span><span class="p">(</span><span class="n">Input_7</span><span class="p">,</span><span class="w"> </span><span class="n">PI_INPUT</span><span class="p">);</span><span class="w"></span>
<span class="linenos">56</span><span class="w">   </span><span class="n">gpioSetMode</span><span class="p">(</span><span class="n">Input_8</span><span class="p">,</span><span class="w"> </span><span class="n">PI_INPUT</span><span class="p">);</span><span class="w"></span>
<span class="linenos">57</span><span class="w">   </span><span class="n">gpioSetMode</span><span class="p">(</span><span class="n">Input_9</span><span class="p">,</span><span class="w"> </span><span class="n">PI_INPUT</span><span class="p">);</span><span class="w"></span>
<span class="linenos">58</span><span class="w">   </span><span class="n">gpioSetMode</span><span class="p">(</span><span class="n">Input_10</span><span class="p">,</span><span class="w"> </span><span class="n">PI_INPUT</span><span class="p">);</span><span class="w"></span>
<span class="linenos">59</span><span class="w">   </span><span class="n">gpioSetMode</span><span class="p">(</span><span class="n">Input_11</span><span class="p">,</span><span class="w"> </span><span class="n">PI_INPUT</span><span class="p">);</span><span class="w"></span>
<span class="linenos">60</span><span class="w">   </span><span class="n">gpioSetMode</span><span class="p">(</span><span class="n">Input_12</span><span class="p">,</span><span class="w"> </span><span class="n">PI_INPUT</span><span class="p">);</span><span class="w"></span>
<span class="linenos">61</span>
<span class="linenos">62</span><span class="w">   </span><span class="n">gpioSetPullUpDown</span><span class="p">(</span><span class="n">Input_1</span><span class="p">,</span><span class="w"> </span><span class="n">PI_PUD_OFF</span><span class="p">);</span><span class="w"></span>
<span class="linenos">63</span><span class="w">   </span><span class="n">gpioSetPullUpDown</span><span class="p">(</span><span class="n">Input_2</span><span class="p">,</span><span class="w"> </span><span class="n">PI_PUD_OFF</span><span class="p">);</span><span class="w"></span>
<span class="linenos">64</span><span class="w">   </span><span class="n">gpioSetPullUpDown</span><span class="p">(</span><span class="n">Input_3</span><span class="p">,</span><span class="w"> </span><span class="n">PI_PUD_OFF</span><span class="p">);</span><span class="w"></span>
<span class="linenos">65</span><span class="w">   </span><span class="n">gpioSetPullUpDown</span><span class="p">(</span><span class="n">Input_4</span><span class="p">,</span><span class="w"> </span><span class="n">PI_PUD_OFF</span><span class="p">);</span><span class="w"></span>
<span class="linenos">66</span><span class="w">   </span><span class="n">gpioSetPullUpDown</span><span class="p">(</span><span class="n">Input_5</span><span class="p">,</span><span class="w"> </span><span class="n">PI_PUD_OFF</span><span class="p">);</span><span class="w"></span>
<span class="linenos">67</span><span class="w">   </span><span class="n">gpioSetPullUpDown</span><span class="p">(</span><span class="n">Input_6</span><span class="p">,</span><span class="w"> </span><span class="n">PI_PUD_OFF</span><span class="p">);</span><span class="w"></span>
<span class="linenos">68</span><span class="w">   </span><span class="n">gpioSetPullUpDown</span><span class="p">(</span><span class="n">Input_7</span><span class="p">,</span><span class="w"> </span><span class="n">PI_PUD_OFF</span><span class="p">);</span><span class="w"></span>
<span class="linenos">69</span><span class="w">   </span><span class="n">gpioSetPullUpDown</span><span class="p">(</span><span class="n">Input_8</span><span class="p">,</span><span class="w"> </span><span class="n">PI_PUD_OFF</span><span class="p">);</span><span class="w"></span>
<span class="linenos">70</span><span class="w">   </span><span class="n">gpioSetPullUpDown</span><span class="p">(</span><span class="n">Input_9</span><span class="p">,</span><span class="w"> </span><span class="n">PI_PUD_OFF</span><span class="p">);</span><span class="w"></span>
<span class="linenos">71</span><span class="w">   </span><span class="n">gpioSetPullUpDown</span><span class="p">(</span><span class="n">Input_10</span><span class="p">,</span><span class="w"> </span><span class="n">PI_PUD_OFF</span><span class="p">);</span><span class="w"></span>
<span class="linenos">72</span><span class="w">   </span><span class="n">gpioSetPullUpDown</span><span class="p">(</span><span class="n">Input_11</span><span class="p">,</span><span class="w"> </span><span class="n">PI_PUD_OFF</span><span class="p">);</span><span class="w"></span>
<span class="linenos">73</span><span class="w">   </span><span class="n">gpioSetPullUpDown</span><span class="p">(</span><span class="n">Input_12</span><span class="p">,</span><span class="w"> </span><span class="n">PI_PUD_OFF</span><span class="p">);</span><span class="w"></span>
<span class="linenos">74</span>
<span class="linenos">75</span><span class="w">   </span><span class="kt">int</span><span class="w"> </span><span class="n">count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">30</span><span class="p">;</span><span class="w"></span>
<span class="linenos">76</span>
<span class="linenos">77</span><span class="w">   </span><span class="k">while</span><span class="p">(</span><span class="n">count</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="linenos">78</span><span class="w">        </span><span class="n">gpioWrite</span><span class="p">(</span><span class="n">Output_1</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span><span class="w"></span>
<span class="linenos">79</span><span class="w">        </span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span><span class="w"></span>
<span class="linenos">80</span><span class="w">        </span><span class="n">gpioWrite</span><span class="p">(</span><span class="n">Output_1</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span><span class="w"></span>
<span class="linenos">81</span><span class="w">        </span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span><span class="w"></span>
<span class="linenos">82</span><span class="w">        </span><span class="n">count</span><span class="o">--</span><span class="p">;</span><span class="w"></span>
<span class="linenos">83</span><span class="w">   </span><span class="p">}</span><span class="w"></span>
<span class="linenos">84</span>
<span class="linenos">85</span><span class="w">   </span><span class="n">gpioTerminate</span><span class="p">();</span><span class="w"></span>
<span class="linenos">86</span><span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>After saving the previous code into a file named <code class="docutils literal notranslate"><span class="pre">io1212-1.c</span></code>, you can compile and link it using:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>gcc -Wall -pthread -o io1212-1 io1212-1.c -lpigpio -lrt
</pre></div>
</div>
</section>
<section id="example-2-using-inputs">
<h2>Example 2: Using inputs<a class="headerlink" href="#example-2-using-inputs" title="Permalink to this headline"></a></h2>
<p>By substituting lines 75-83 with the following snippet, you can see an example of how to read an input using <code class="docutils literal notranslate"><span class="pre">gpioRead()</span></code>.</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="w">   </span><span class="kt">int</span><span class="w"> </span><span class="n">count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">20</span><span class="p">;</span><span class="w"></span>
<span class="w">   </span><span class="kt">int</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">gpioRead</span><span class="p">(</span><span class="n">Input_1</span><span class="p">);</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="k">while</span><span class="p">(</span><span class="n">count</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">	</span><span class="k">while</span><span class="p">(</span><span class="n">state</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">gpioRead</span><span class="p">(</span><span class="n">Input_1</span><span class="p">));</span><span class="w"></span>
<span class="w">	</span><span class="n">state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">gpioRead</span><span class="p">(</span><span class="n">Input_1</span><span class="p">);</span><span class="w"></span>
<span class="w">  	</span><span class="n">gpioWrite</span><span class="p">(</span><span class="n">Output_1</span><span class="p">,</span><span class="w"> </span><span class="n">state</span><span class="p">);</span><span class="w"></span>
<span class="w">   	</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span><span class="w"></span>
<span class="w">   	</span><span class="n">count</span><span class="o">--</span><span class="p">;</span><span class="w"></span>
<span class="w">   </span><span class="p">}</span><span class="w"></span>

<span class="w">   </span><span class="n">gpioWrite</span><span class="p">(</span><span class="n">Output_1</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
</section>
<section id="example-3-callback-functions">
<h2>Example 3: Callback functions<a class="headerlink" href="#example-3-callback-functions" title="Permalink to this headline"></a></h2>
<p>The following example shows how pigpio allows the registration of an alert function that will be called when a GPIO pin changes state.</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;unistd.h&gt;</span><span class="cp"></span>
<span class="linenos"> 2</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span><span class="cp"></span>
<span class="linenos"> 3</span>
<span class="linenos"> 4</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;pigpio.h&gt;</span><span class="cp"></span>
<span class="linenos"> 5</span>
<span class="linenos"> 6</span><span class="cp">#define Output_1 4</span>
<span class="linenos"> 7</span><span class="cp">#define Output_2 5</span>
<span class="linenos"> 8</span><span class="cp">#define Output_3 6</span>
<span class="linenos"> 9</span><span class="cp">#define Output_4 7</span>
<span class="linenos">10</span><span class="cp">#define Output_5 8</span>
<span class="linenos">11</span><span class="cp">#define Output_6 9</span>
<span class="linenos">12</span><span class="cp">#define Output_7 10</span>
<span class="linenos">13</span><span class="cp">#define Output_8 11</span>
<span class="linenos">14</span><span class="cp">#define Output_9 12</span>
<span class="linenos">15</span><span class="cp">#define Output_10 13</span>
<span class="linenos">16</span><span class="cp">#define Output_11 14</span>
<span class="linenos">17</span><span class="cp">#define Output_12 15</span>
<span class="linenos">18</span>
<span class="linenos">19</span><span class="cp">#define Input_1 16</span>
<span class="linenos">20</span><span class="cp">#define Input_2 17</span>
<span class="linenos">21</span><span class="cp">#define Input_3 18</span>
<span class="linenos">22</span><span class="cp">#define Input_4 19</span>
<span class="linenos">23</span><span class="cp">#define Input_5 20</span>
<span class="linenos">24</span><span class="cp">#define Input_6 21</span>
<span class="linenos">25</span><span class="cp">#define Input_7 22</span>
<span class="linenos">26</span><span class="cp">#define Input_8 23</span>
<span class="linenos">27</span><span class="cp">#define Input_9 24</span>
<span class="linenos">28</span><span class="cp">#define Input_10 25</span>
<span class="linenos">29</span><span class="cp">#define Input_11 26</span>
<span class="linenos">30</span><span class="cp">#define Input_12 27</span>
<span class="linenos">31</span>
<span class="linenos">32</span>
<span class="hll"><span class="linenos">33</span><span class="kt">void</span><span class="w"> </span><span class="nf">alert</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">gpio</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">level</span><span class="p">,</span><span class="w"> </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">tick</span><span class="p">)</span><span class="w"></span>
</span><span class="hll"><span class="linenos">34</span><span class="p">{</span><span class="w"></span>
</span><span class="hll"><span class="linenos">35</span><span class="w">   </span><span class="n">gpioWrite</span><span class="p">(</span><span class="n">Output_1</span><span class="p">,</span><span class="w"> </span><span class="n">level</span><span class="p">);</span><span class="w"></span>
</span><span class="hll"><span class="linenos">36</span><span class="p">}</span><span class="w"></span>
</span><span class="linenos">37</span>
<span class="linenos">38</span><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">argv</span><span class="p">[])</span><span class="w"></span>
<span class="linenos">39</span><span class="p">{</span><span class="w"></span>
<span class="linenos">40</span><span class="w">   </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">gpioInitialise</span><span class="p">()</span><span class="o">&lt;</span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"></span>
<span class="linenos">41</span>
<span class="linenos">42</span><span class="w">   </span><span class="n">gpioSetMode</span><span class="p">(</span><span class="n">Output_1</span><span class="p">,</span><span class="w"> </span><span class="n">PI_OUTPUT</span><span class="p">);</span><span class="w"></span>
<span class="linenos">43</span><span class="w">   </span><span class="n">gpioSetMode</span><span class="p">(</span><span class="n">Output_2</span><span class="p">,</span><span class="w"> </span><span class="n">PI_OUTPUT</span><span class="p">);</span><span class="w"></span>
<span class="linenos">44</span><span class="w">   </span><span class="n">gpioSetMode</span><span class="p">(</span><span class="n">Output_3</span><span class="p">,</span><span class="w"> </span><span class="n">PI_OUTPUT</span><span class="p">);</span><span class="w"></span>
<span class="linenos">45</span><span class="w">   </span><span class="n">gpioSetMode</span><span class="p">(</span><span class="n">Output_4</span><span class="p">,</span><span class="w"> </span><span class="n">PI_OUTPUT</span><span class="p">);</span><span class="w"></span>
<span class="linenos">46</span><span class="w">   </span><span class="n">gpioSetMode</span><span class="p">(</span><span class="n">Output_5</span><span class="p">,</span><span class="w"> </span><span class="n">PI_OUTPUT</span><span class="p">);</span><span class="w"></span>
<span class="linenos">47</span><span class="w">   </span><span class="n">gpioSetMode</span><span class="p">(</span><span class="n">Output_6</span><span class="p">,</span><span class="w"> </span><span class="n">PI_OUTPUT</span><span class="p">);</span><span class="w"></span>
<span class="linenos">48</span><span class="w">   </span><span class="n">gpioSetMode</span><span class="p">(</span><span class="n">Output_7</span><span class="p">,</span><span class="w"> </span><span class="n">PI_OUTPUT</span><span class="p">);</span><span class="w"></span>
<span class="linenos">49</span><span class="w">   </span><span class="n">gpioSetMode</span><span class="p">(</span><span class="n">Output_8</span><span class="p">,</span><span class="w"> </span><span class="n">PI_OUTPUT</span><span class="p">);</span><span class="w"></span>
<span class="linenos">50</span><span class="w">   </span><span class="n">gpioSetMode</span><span class="p">(</span><span class="n">Output_9</span><span class="p">,</span><span class="w"> </span><span class="n">PI_OUTPUT</span><span class="p">);</span><span class="w"></span>
<span class="linenos">51</span><span class="w">   </span><span class="n">gpioSetMode</span><span class="p">(</span><span class="n">Output_10</span><span class="p">,</span><span class="w"> </span><span class="n">PI_OUTPUT</span><span class="p">);</span><span class="w"></span>
<span class="linenos">52</span><span class="w">   </span><span class="n">gpioSetMode</span><span class="p">(</span><span class="n">Output_11</span><span class="p">,</span><span class="w"> </span><span class="n">PI_OUTPUT</span><span class="p">);</span><span class="w"></span>
<span class="linenos">53</span><span class="w">   </span><span class="n">gpioSetMode</span><span class="p">(</span><span class="n">Output_12</span><span class="p">,</span><span class="w"> </span><span class="n">PI_OUTPUT</span><span class="p">);</span><span class="w"></span>
<span class="linenos">54</span>
<span class="linenos">55</span><span class="w">   </span><span class="n">gpioSetMode</span><span class="p">(</span><span class="n">Input_1</span><span class="p">,</span><span class="w"> </span><span class="n">PI_INPUT</span><span class="p">);</span><span class="w"></span>
<span class="linenos">56</span><span class="w">   </span><span class="n">gpioSetMode</span><span class="p">(</span><span class="n">Input_2</span><span class="p">,</span><span class="w"> </span><span class="n">PI_INPUT</span><span class="p">);</span><span class="w"></span>
<span class="linenos">57</span><span class="w">   </span><span class="n">gpioSetMode</span><span class="p">(</span><span class="n">Input_3</span><span class="p">,</span><span class="w"> </span><span class="n">PI_INPUT</span><span class="p">);</span><span class="w"></span>
<span class="linenos">58</span><span class="w">   </span><span class="n">gpioSetMode</span><span class="p">(</span><span class="n">Input_4</span><span class="p">,</span><span class="w"> </span><span class="n">PI_INPUT</span><span class="p">);</span><span class="w"></span>
<span class="linenos">59</span><span class="w">   </span><span class="n">gpioSetMode</span><span class="p">(</span><span class="n">Input_5</span><span class="p">,</span><span class="w"> </span><span class="n">PI_INPUT</span><span class="p">);</span><span class="w"></span>
<span class="linenos">60</span><span class="w">   </span><span class="n">gpioSetMode</span><span class="p">(</span><span class="n">Input_6</span><span class="p">,</span><span class="w"> </span><span class="n">PI_INPUT</span><span class="p">);</span><span class="w"></span>
<span class="linenos">61</span><span class="w">   </span><span class="n">gpioSetMode</span><span class="p">(</span><span class="n">Input_7</span><span class="p">,</span><span class="w"> </span><span class="n">PI_INPUT</span><span class="p">);</span><span class="w"></span>
<span class="linenos">62</span><span class="w">   </span><span class="n">gpioSetMode</span><span class="p">(</span><span class="n">Input_8</span><span class="p">,</span><span class="w"> </span><span class="n">PI_INPUT</span><span class="p">);</span><span class="w"></span>
<span class="linenos">63</span><span class="w">   </span><span class="n">gpioSetMode</span><span class="p">(</span><span class="n">Input_9</span><span class="p">,</span><span class="w"> </span><span class="n">PI_INPUT</span><span class="p">);</span><span class="w"></span>
<span class="linenos">64</span><span class="w">   </span><span class="n">gpioSetMode</span><span class="p">(</span><span class="n">Input_10</span><span class="p">,</span><span class="w"> </span><span class="n">PI_INPUT</span><span class="p">);</span><span class="w"></span>
<span class="linenos">65</span><span class="w">   </span><span class="n">gpioSetMode</span><span class="p">(</span><span class="n">Input_11</span><span class="p">,</span><span class="w"> </span><span class="n">PI_INPUT</span><span class="p">);</span><span class="w"></span>
<span class="linenos">66</span><span class="w">   </span><span class="n">gpioSetMode</span><span class="p">(</span><span class="n">Input_12</span><span class="p">,</span><span class="w"> </span><span class="n">PI_INPUT</span><span class="p">);</span><span class="w"></span>
<span class="linenos">67</span>
<span class="linenos">68</span><span class="w">   </span><span class="n">gpioSetPullUpDown</span><span class="p">(</span><span class="n">Input_1</span><span class="p">,</span><span class="w"> </span><span class="n">PI_PUD_OFF</span><span class="p">);</span><span class="w"></span>
<span class="linenos">69</span><span class="w">   </span><span class="n">gpioSetPullUpDown</span><span class="p">(</span><span class="n">Input_2</span><span class="p">,</span><span class="w"> </span><span class="n">PI_PUD_OFF</span><span class="p">);</span><span class="w"></span>
<span class="linenos">70</span><span class="w">   </span><span class="n">gpioSetPullUpDown</span><span class="p">(</span><span class="n">Input_3</span><span class="p">,</span><span class="w"> </span><span class="n">PI_PUD_OFF</span><span class="p">);</span><span class="w"></span>
<span class="linenos">71</span><span class="w">   </span><span class="n">gpioSetPullUpDown</span><span class="p">(</span><span class="n">Input_4</span><span class="p">,</span><span class="w"> </span><span class="n">PI_PUD_OFF</span><span class="p">);</span><span class="w"></span>
<span class="linenos">72</span><span class="w">   </span><span class="n">gpioSetPullUpDown</span><span class="p">(</span><span class="n">Input_5</span><span class="p">,</span><span class="w"> </span><span class="n">PI_PUD_OFF</span><span class="p">);</span><span class="w"></span>
<span class="linenos">73</span><span class="w">   </span><span class="n">gpioSetPullUpDown</span><span class="p">(</span><span class="n">Input_6</span><span class="p">,</span><span class="w"> </span><span class="n">PI_PUD_OFF</span><span class="p">);</span><span class="w"></span>
<span class="linenos">74</span><span class="w">   </span><span class="n">gpioSetPullUpDown</span><span class="p">(</span><span class="n">Input_7</span><span class="p">,</span><span class="w"> </span><span class="n">PI_PUD_OFF</span><span class="p">);</span><span class="w"></span>
<span class="linenos">75</span><span class="w">   </span><span class="n">gpioSetPullUpDown</span><span class="p">(</span><span class="n">Input_8</span><span class="p">,</span><span class="w"> </span><span class="n">PI_PUD_OFF</span><span class="p">);</span><span class="w"></span>
<span class="linenos">76</span><span class="w">   </span><span class="n">gpioSetPullUpDown</span><span class="p">(</span><span class="n">Input_9</span><span class="p">,</span><span class="w"> </span><span class="n">PI_PUD_OFF</span><span class="p">);</span><span class="w"></span>
<span class="linenos">77</span><span class="w">   </span><span class="n">gpioSetPullUpDown</span><span class="p">(</span><span class="n">Input_10</span><span class="p">,</span><span class="w"> </span><span class="n">PI_PUD_OFF</span><span class="p">);</span><span class="w"></span>
<span class="linenos">78</span><span class="w">   </span><span class="n">gpioSetPullUpDown</span><span class="p">(</span><span class="n">Input_11</span><span class="p">,</span><span class="w"> </span><span class="n">PI_PUD_OFF</span><span class="p">);</span><span class="w"></span>
<span class="linenos">79</span><span class="w">   </span><span class="n">gpioSetPullUpDown</span><span class="p">(</span><span class="n">Input_12</span><span class="p">,</span><span class="w"> </span><span class="n">PI_PUD_OFF</span><span class="p">);</span><span class="w"></span>
<span class="linenos">80</span>
<span class="hll"><span class="linenos">81</span><span class="w">   </span><span class="kt">int</span><span class="w"> </span><span class="n">secs</span><span class="o">=</span><span class="mi">60</span><span class="p">;</span><span class="w"></span>
</span><span class="hll"><span class="linenos">82</span>
</span><span class="hll"><span class="linenos">83</span><span class="w">   </span><span class="n">gpioSetAlertFunc</span><span class="p">(</span><span class="n">Input_1</span><span class="p">,</span><span class="w"> </span><span class="n">alert</span><span class="p">);</span><span class="w"></span>
</span><span class="hll"><span class="linenos">84</span>
</span><span class="hll"><span class="linenos">85</span><span class="w">   </span><span class="n">sleep</span><span class="p">(</span><span class="n">secs</span><span class="p">);</span><span class="w"></span>
</span><span class="hll"><span class="linenos">86</span>
</span><span class="hll"><span class="linenos">87</span><span class="w">   </span><span class="n">gpioWrite</span><span class="p">(</span><span class="n">Output_1</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span><span class="w"></span>
</span><span class="linenos">88</span><span class="w">   </span><span class="n">gpioTerminate</span><span class="p">();</span><span class="w"></span>
<span class="linenos">89</span><span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="libgpiod.html" class="btn btn-neutral float-left" title="Using libgpiod" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="pigpiod.html" class="btn btn-neutral float-right" title="Using pigpiod" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, dictel.io.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
    <!-- Theme Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-EJG1VJMZER"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-EJG1VJMZER', {
          'anonymize_ip': false,
      });
    </script> 

</body>
</html>